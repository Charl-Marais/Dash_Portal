
<!-- include all the html tags before an including the wrapper div tag //-->
<% include partials/html_head %>


<% include partials/main_header %>


<% include partials/main_sidebar %>

<!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <h1>
        Asset Management
      </h1> 
      <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Level</a></li>
        <li class="active">Here</li>
      </ol>
    </section>

    <!-- Main content -->
    <section class="content container-fluid">
      <div class="box">
        <div class="box-header">
          <h3 class="box-title">List Of assets</h3>
        </div>
        <!-- /.box-header -->
        <div class="box-body no-padding">
          <table class="table table-striped" border="1">
            <tbody><tr>
              <th style="width: 10px">#</th>
              <th colspan="3">Retrieved from Device table with Eager Loading</th>
              <th colspan="3">Retrieved list of programs from Applications Table</th>
            </tr>
            <tr>
              <td style="width: 10px">#</td>
              <td>Serial Number</td>
              <td>Manufaturer</td>
              <td>Model Number</td>
              <td>Program Name</td>
              <td>Vendor Name</td>
              <td>Licence</td>
            </tr>
            <% devices.forEach( (d) => { %>
              <% var rows = (d.Applications.length > 0)? d.Applications.length : 1 %>
              <tr>
                <td rowspan="<%= rows %>"><%= d.id %>.</td>
                <td rowspan="<%= rows %>"><%= d.serial %></td>
                <td rowspan="<%= rows %>"><%= d.make %></td>
                <td rowspan="<%= rows %>"><%= d.model %></td>
                <% if (d.Applications.length > 0) { %>
                  <td><%= d.Applications[0].name %></td>
                  <td><%= d.Applications[0].vendor %></td>
                  <td><%= d.Applications[0].licence %></td>
                <% } else { %>
                  <td>N/A</td>
                  <td>N/A</td>
                  <td>N/A</td>
                <% } %>
              </tr>
              <% for (var i=1; d.Applications.length > i; i++) { %>
                  <tr>
                    <td><%= d.Applications[i].name %></td>
                    <td><%= d.Applications[i].vendor %></td>
                    <td><%= d.Applications[i].licence %></td>
                  </tr>
              <% } %>
            <% }) %>
            </tbody>
          </table>

          

        </div>
      <!-- /.box-body -->
      </div>
    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->


<% include partials/main_footer %>


<% include partials/control_sidebar %>

<!-- include all the html tags after an including the wrapper div tag //-->
<% include partials/html_foot %>